<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Happstack.Server.Validation</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Happstack-Server-Validation.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">happstack-server-7.3.1: Web related tools and services.</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr></table><p class="caption">Happstack.Server.Validation</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Support for validating server output on-the-fly. Validators can be configured on a per content-type basis.
</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><a href="#v:setValidator">setValidator</a> :: (<a href="Happstack-Server-Internal-Types.html#t:Response">Response</a> -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/System-IO.html#t:IO">IO</a> <a href="Happstack-Server-Internal-Types.html#t:Response">Response</a>) -&gt; <a href="Happstack-Server-Internal-Types.html#t:Response">Response</a> -&gt; <a href="Happstack-Server-Internal-Types.html#t:Response">Response</a></li><li class="src short"><a href="#v:setValidatorSP">setValidatorSP</a> :: (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Monad">Monad</a> m, <a href="Happstack-Server-Response.html#t:ToMessage">ToMessage</a> r) =&gt; (<a href="Happstack-Server-Internal-Types.html#t:Response">Response</a> -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/System-IO.html#t:IO">IO</a> <a href="Happstack-Server-Internal-Types.html#t:Response">Response</a>) -&gt; m r -&gt; m <a href="Happstack-Server-Internal-Types.html#t:Response">Response</a></li><li class="src short"><a href="#v:validateConf">validateConf</a> :: <a href="Happstack-Server-Internal-Types.html#t:Conf">Conf</a></li><li class="src short"><a href="#v:runValidator">runValidator</a> :: (<a href="Happstack-Server-Internal-Types.html#t:Response">Response</a> -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/System-IO.html#t:IO">IO</a> <a href="Happstack-Server-Internal-Types.html#t:Response">Response</a>) -&gt; <a href="Happstack-Server-Internal-Types.html#t:Response">Response</a> -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/System-IO.html#t:IO">IO</a> <a href="Happstack-Server-Internal-Types.html#t:Response">Response</a></li><li class="src short"><a href="#v:wdgHTMLValidator">wdgHTMLValidator</a> :: (<a href="file:///Library/Haskell/ghc-7.6.3/lib/transformers-0.3.0.0/doc/html/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, <a href="Happstack-Server-Response.html#t:ToMessage">ToMessage</a> r) =&gt; r -&gt; m <a href="Happstack-Server-Internal-Types.html#t:Response">Response</a></li><li class="src short"><a href="#v:noopValidator">noopValidator</a> :: <a href="Happstack-Server-Internal-Types.html#t:Response">Response</a> -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/System-IO.html#t:IO">IO</a> <a href="Happstack-Server-Internal-Types.html#t:Response">Response</a></li><li class="src short"><a href="#v:lazyProcValidator">lazyProcValidator</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/System-IO.html#t:FilePath">FilePath</a> -&gt; [<a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-String.html#t:String">String</a>] -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Maybe.html#t:Maybe">Maybe</a> <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Maybe.html#t:Maybe">Maybe</a> [(<a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-String.html#t:String">String</a>, <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-String.html#t:String">String</a>)] -&gt; (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Maybe.html#t:Maybe">Maybe</a> <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.0.2/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Bool.html#t:Bool">Bool</a>) -&gt; <a href="Happstack-Server-Internal-Types.html#t:Response">Response</a> -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/System-IO.html#t:IO">IO</a> <a href="Happstack-Server-Internal-Types.html#t:Response">Response</a></li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a name="v:setValidator" class="def">setValidator</a> :: (<a href="Happstack-Server-Internal-Types.html#t:Response">Response</a> -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/System-IO.html#t:IO">IO</a> <a href="Happstack-Server-Internal-Types.html#t:Response">Response</a>) -&gt; <a href="Happstack-Server-Internal-Types.html#t:Response">Response</a> -&gt; <a href="Happstack-Server-Internal-Types.html#t:Response">Response</a></p><div class="doc"><p>Set the validator which should be used for this particular
 <code><a href="Happstack-Server-Internal-Types.html#t:Response">Response</a></code> when validation is enabled.
</p><p>Calling this function does not enable validation. That can only be
 done by enabling the validation in the <code><a href="Happstack-Server-Internal-Types.html#t:Conf">Conf</a></code> that is passed to
 <code>simpleHTTP</code>.
</p><p>You do not need to call this function if the validator set in
 <code><a href="Happstack-Server-Internal-Types.html#t:Conf">Conf</a></code> does what you want already.
</p><p>Example: (use <code><a href="Happstack-Server-Validation.html#v:noopValidator">noopValidator</a></code> instead of the default supplied by
 <code><a href="Happstack-Server-Validation.html#v:validateConf">validateConf</a></code>)
</p><pre> simpleHTTP validateConf $ ok . setValidator noopValidator =&lt;&lt; htmlPage
</pre><p>See also: <code><a href="Happstack-Server-Validation.html#v:validateConf">validateConf</a></code>, <code><a href="Happstack-Server-Validation.html#v:wdgHTMLValidator">wdgHTMLValidator</a></code>, <code><a href="Happstack-Server-Validation.html#v:noopValidator">noopValidator</a></code>,
 <code><a href="Happstack-Server-Validation.html#v:lazyProcValidator">lazyProcValidator</a></code>.
</p></div></div><div class="top"><p class="src"><a name="v:setValidatorSP" class="def">setValidatorSP</a> :: (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Monad">Monad</a> m, <a href="Happstack-Server-Response.html#t:ToMessage">ToMessage</a> r) =&gt; (<a href="Happstack-Server-Internal-Types.html#t:Response">Response</a> -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/System-IO.html#t:IO">IO</a> <a href="Happstack-Server-Internal-Types.html#t:Response">Response</a>) -&gt; m r -&gt; m <a href="Happstack-Server-Internal-Types.html#t:Response">Response</a></p><div class="doc"><p><code>ServerPart</code> version of <code><a href="Happstack-Server-Validation.html#v:setValidator">setValidator</a></code>.
</p><p>Example: (Set validator to <code><a href="Happstack-Server-Validation.html#v:noopValidator">noopValidator</a></code>)
</p><pre>  simpleHTTP validateConf $ setValidatorSP noopValidator (dir &quot;ajax&quot; ... )
</pre></div></div><div class="top"><p class="src"><a name="v:validateConf" class="def">validateConf</a> :: <a href="Happstack-Server-Internal-Types.html#t:Conf">Conf</a></p><div class="doc"><p>Extend <code><a href="Happstack-Server-Internal-Types.html#v:nullConf">nullConf</a></code> by enabling validation and setting
 <code><a href="Happstack-Server-Validation.html#v:wdgHTMLValidator">wdgHTMLValidator</a></code> as the default validator for <code>text/html</code>.
</p><p>Example:
</p><pre> simpleHTTP validateConf . anyRequest $ ok htmlPage
</pre></div></div><div class="top"><p class="src"><a name="v:runValidator" class="def">runValidator</a> :: (<a href="Happstack-Server-Internal-Types.html#t:Response">Response</a> -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/System-IO.html#t:IO">IO</a> <a href="Happstack-Server-Internal-Types.html#t:Response">Response</a>) -&gt; <a href="Happstack-Server-Internal-Types.html#t:Response">Response</a> -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/System-IO.html#t:IO">IO</a> <a href="Happstack-Server-Internal-Types.html#t:Response">Response</a></p><div class="doc"><p>Actually perform the validation on a <code><a href="Happstack-Server-Internal-Types.html#t:Response">Response</a></code>.
</p><p>Run the validator specified in the <code><a href="Happstack-Server-Internal-Types.html#t:Response">Response</a></code>. If none is provide
 use the supplied default instead.
</p><p>Note: This function will run validation unconditionally. You
 probably want <code><a href="Happstack-Server-Validation.html#v:setValidator">setValidator</a></code> or <code><a href="Happstack-Server-Validation.html#v:validateConf">validateConf</a></code>.
</p></div></div><div class="top"><p class="src"><a name="v:wdgHTMLValidator" class="def">wdgHTMLValidator</a> :: (<a href="file:///Library/Haskell/ghc-7.6.3/lib/transformers-0.3.0.0/doc/html/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, <a href="Happstack-Server-Response.html#t:ToMessage">ToMessage</a> r) =&gt; r -&gt; m <a href="Happstack-Server-Internal-Types.html#t:Response">Response</a></p><div class="doc"><p>Validate <code>text/html</code> content with <code>WDG HTML Validator</code>.
</p><p>This function expects the executable to be named <code>validate</code> and it
 must be in the default <code>PATH</code>.
</p><p>See also: <code><a href="Happstack-Server-Validation.html#v:setValidator">setValidator</a></code>, <code><a href="Happstack-Server-Validation.html#v:validateConf">validateConf</a></code>, <code><a href="Happstack-Server-Validation.html#v:lazyProcValidator">lazyProcValidator</a></code>.
</p></div></div><div class="top"><p class="src"><a name="v:noopValidator" class="def">noopValidator</a> :: <a href="Happstack-Server-Internal-Types.html#t:Response">Response</a> -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/System-IO.html#t:IO">IO</a> <a href="Happstack-Server-Internal-Types.html#t:Response">Response</a></p><div class="doc"><p>A validator which always succeeds.
</p><p>Useful for selectively disabling validation. For example, if you
 are sending down HTML fragments to an AJAX application and the
 default validator only understands complete documents.
</p></div></div><div class="top"><p class="src"><a name="v:lazyProcValidator" class="def">lazyProcValidator</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/System-IO.html#t:FilePath">FilePath</a></td><td class="doc"><p>name of executable
</p></td></tr><tr><td class="src">-&gt; [<a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-String.html#t:String">String</a>]</td><td class="doc"><p>arguments to pass to the executable
</p></td></tr><tr><td class="src">-&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Maybe.html#t:Maybe">Maybe</a> <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/System-IO.html#t:FilePath">FilePath</a></td><td class="doc"><p>optional path to working directory
</p></td></tr><tr><td class="src">-&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Maybe.html#t:Maybe">Maybe</a> [(<a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-String.html#t:String">String</a>, <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-String.html#t:String">String</a>)]</td><td class="doc"><p>optional environment (otherwise inherit)
</p></td></tr><tr><td class="src">-&gt; (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Maybe.html#t:Maybe">Maybe</a> <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.0.2/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Bool.html#t:Bool">Bool</a>)</td><td class="doc"><p>content-type filter
</p></td></tr><tr><td class="src">-&gt; <a href="Happstack-Server-Internal-Types.html#t:Response">Response</a></td><td class="doc"><p>Response to validate
</p></td></tr><tr><td class="src">-&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/System-IO.html#t:IO">IO</a> <a href="Happstack-Server-Internal-Types.html#t:Response">Response</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Validate the <code><a href="Happstack-Server-Internal-Types.html#t:Response">Response</a></code> using an external application.
</p><p>If the external application returns 0, the original response is
 returned unmodified. If the external application returns non-zero,
 a <code><a href="Happstack-Server-Internal-Types.html#t:Response">Response</a></code> containing the error messages and original response
 body is returned instead.
</p><p>This function also takes a predicate filter which is applied to the
 content-type of the response. The filter will only be applied if
 the predicate returns true.
</p><p>NOTE: This function requires the use of -threaded to avoid
 blocking.  However, you probably need that for Happstack anyway.
</p><p>See also: <code><a href="Happstack-Server-Validation.html#v:wdgHTMLValidator">wdgHTMLValidator</a></code>.
</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.13.2</p></div></body></html>