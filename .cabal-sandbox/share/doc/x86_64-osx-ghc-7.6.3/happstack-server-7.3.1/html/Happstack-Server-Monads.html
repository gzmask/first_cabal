<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Happstack.Server.Monads</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Happstack-Server-Monads.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">happstack-server-7.3.1: Web related tools and services.</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr></table><p class="caption">Happstack.Server.Monads</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">ServerPartT
</a></li><li><a href="#g:2">Happstack class
</a></li><li><a href="#g:3">ServerMonad
</a></li><li><a href="#g:4">FilterMonad
</a></li><li><a href="#g:5">WebMonad
</a></li><li><a href="#g:6">MonadPlus helpers
</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This module provides four classes and some related functions
 which provide <code><a href="Happstack-Server-Monads.html#t:ServerPartT">ServerPartT</a></code> with much of its web-centric behavior.
</p><ol><li> <code><a href="Happstack-Server-Monads.html#t:ServerMonad">ServerMonad</a></code> provides access to the HTTP <code>Request</code>
</li><li> <code><a href="Happstack-Server-Monads.html#t:FilterMonad">FilterMonad</a></code> provides the ability to apply filters and transformations to a <code><a href="Happstack-Server-Internal-Types.html#t:Response">Response</a></code>
</li><li> <code><a href="Happstack-Server-Monads.html#t:WebMonad">WebMonad</a></code> provides a way to escape a computation early and return a <code><a href="Happstack-Server-Internal-Types.html#t:Response">Response</a></code>
</li><li> <code><a href="Happstack-Server-RqData.html#t:HasRqData">HasRqData</a></code> which provides access to the decoded QUERY_STRING and request body/form data
</li></ol></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">data</span>  <a href="#t:ServerPartT">ServerPartT</a> m a</li><li class="src short"><span class="keyword">type</span> <a href="#t:ServerPart">ServerPart</a> a = <a href="Happstack-Server-Monads.html#t:ServerPartT">ServerPartT</a> <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/System-IO.html#t:IO">IO</a> a</li><li class="src short"><span class="keyword">class</span> (<a href="Happstack-Server-Monads.html#t:ServerMonad">ServerMonad</a> m, <a href="Happstack-Server-Monads.html#t:WebMonad">WebMonad</a> <a href="Happstack-Server-Internal-Types.html#t:Response">Response</a> m, <a href="Happstack-Server-Monads.html#t:FilterMonad">FilterMonad</a> <a href="Happstack-Server-Internal-Types.html#t:Response">Response</a> m, <a href="file:///Library/Haskell/ghc-7.6.3/lib/transformers-0.3.0.0/doc/html/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:MonadPlus">MonadPlus</a> m, <a href="Happstack-Server-RqData.html#t:HasRqData">HasRqData</a> m, <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Monad">Monad</a> m, <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Functor">Functor</a> m, <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Applicative.html#t:Applicative">Applicative</a> m, <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Applicative.html#t:Alternative">Alternative</a> m) =&gt; <a href="#t:Happstack">Happstack</a> m </li><li class="src short"><span class="keyword">class</span> <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="#t:ServerMonad">ServerMonad</a> m  <span class="keyword">where</span><ul class="subs"><li><a href="#v:askRq">askRq</a> :: m <a href="Happstack-Server-Internal-Types.html#t:Request">Request</a></li><li><a href="#v:localRq">localRq</a> ::  (<a href="Happstack-Server-Internal-Types.html#t:Request">Request</a> -&gt; <a href="Happstack-Server-Internal-Types.html#t:Request">Request</a>) -&gt; m a -&gt; m a</li></ul></li><li class="src short"><a href="#v:mapServerPartT">mapServerPartT</a> ::  (<a href="Happstack-Server-Monads.html#t:UnWebT">UnWebT</a> m a -&gt; <a href="Happstack-Server-Monads.html#t:UnWebT">UnWebT</a> n b) -&gt; <a href="Happstack-Server-Monads.html#t:ServerPartT">ServerPartT</a> m a -&gt; <a href="Happstack-Server-Monads.html#t:ServerPartT">ServerPartT</a> n b</li><li class="src short"><a href="#v:mapServerPartT-39-">mapServerPartT'</a> ::  (<a href="Happstack-Server-Internal-Types.html#t:Request">Request</a> -&gt; <a href="Happstack-Server-Monads.html#t:UnWebT">UnWebT</a> m a -&gt; <a href="Happstack-Server-Monads.html#t:UnWebT">UnWebT</a> n b) -&gt; <a href="Happstack-Server-Monads.html#t:ServerPartT">ServerPartT</a> m a -&gt; <a href="Happstack-Server-Monads.html#t:ServerPartT">ServerPartT</a> n b</li><li class="src short"><span class="keyword">type</span> <a href="#t:UnWebT">UnWebT</a> m a = m (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Either.html#t:Either">Either</a> <a href="Happstack-Server-Internal-Types.html#t:Response">Response</a> a, <a href="Happstack-Server-Internal-Monads.html#t:FilterFun">FilterFun</a> <a href="Happstack-Server-Internal-Types.html#t:Response">Response</a>))</li><li class="src short"><a href="#v:filterFun">filterFun</a> ::  (a -&gt; a) -&gt; <a href="Happstack-Server-Internal-Monads.html#t:FilterFun">FilterFun</a> a</li><li class="src short"><span class="keyword">class</span> <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="#t:FilterMonad">FilterMonad</a> a m | m -&gt; a <span class="keyword">where</span><ul class="subs"><li><a href="#v:setFilter">setFilter</a> :: (a -&gt; a) -&gt; m ()</li><li><a href="#v:composeFilter">composeFilter</a> :: (a -&gt; a) -&gt; m ()</li><li><a href="#v:getFilter">getFilter</a> ::  m b -&gt; m (b, a -&gt; a)</li></ul></li><li class="src short"><a href="#v:ignoreFilters">ignoreFilters</a> :: <a href="Happstack-Server-Monads.html#t:FilterMonad">FilterMonad</a> a m =&gt; m ()</li><li class="src short"><a href="#v:addHeaderM">addHeaderM</a> :: <a href="Happstack-Server-Monads.html#t:FilterMonad">FilterMonad</a> <a href="Happstack-Server-Internal-Types.html#t:Response">Response</a> m =&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-String.html#t:String">String</a> -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-String.html#t:String">String</a> -&gt; m ()</li><li class="src short"><a href="#v:getHeaderM">getHeaderM</a> :: <a href="Happstack-Server-Monads.html#t:ServerMonad">ServerMonad</a> m =&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-String.html#t:String">String</a> -&gt; m (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Maybe.html#t:Maybe">Maybe</a> <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.0.2/Data-ByteString.html#t:ByteString">ByteString</a>)</li><li class="src short"><a href="#v:setHeaderM">setHeaderM</a> :: <a href="Happstack-Server-Monads.html#t:FilterMonad">FilterMonad</a> <a href="Happstack-Server-Internal-Types.html#t:Response">Response</a> m =&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-String.html#t:String">String</a> -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-String.html#t:String">String</a> -&gt; m ()</li><li class="src short"><a href="#v:neverExpires">neverExpires</a> :: <a href="Happstack-Server-Monads.html#t:FilterMonad">FilterMonad</a> <a href="Happstack-Server-Internal-Types.html#t:Response">Response</a> m =&gt; m ()</li><li class="src short"><span class="keyword">class</span> <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="#t:WebMonad">WebMonad</a> a m | m -&gt; a <span class="keyword">where</span><ul class="subs"><li><a href="#v:finishWith">finishWith</a> ::  a -&gt; m b</li></ul></li><li class="src short"><a href="#v:escape">escape</a> :: (<a href="Happstack-Server-Monads.html#t:WebMonad">WebMonad</a> a m, <a href="Happstack-Server-Monads.html#t:FilterMonad">FilterMonad</a> a m) =&gt; m a -&gt; m b</li><li class="src short"><a href="#v:escape-39-">escape'</a> :: (<a href="Happstack-Server-Monads.html#t:WebMonad">WebMonad</a> a m, <a href="Happstack-Server-Monads.html#t:FilterMonad">FilterMonad</a> a m) =&gt; a -&gt; m b</li><li class="src short"><a href="#v:require">require</a> :: (<a href="file:///Library/Haskell/ghc-7.6.3/lib/transformers-0.3.0.0/doc/html/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:MonadPlus">MonadPlus</a> m) =&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/System-IO.html#t:IO">IO</a> (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Maybe.html#t:Maybe">Maybe</a> a) -&gt; (a -&gt; m r) -&gt; m r</li><li class="src short"><a href="#v:requireM">requireM</a> :: (<a href="file:///Library/Haskell/ghc-7.6.3/lib/transformers-0.3.0.0/doc/html/Control-Monad-Trans-Class.html#t:MonadTrans">MonadTrans</a> t, <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Monad">Monad</a> m, <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:MonadPlus">MonadPlus</a> (t m)) =&gt; m (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Maybe.html#t:Maybe">Maybe</a> a) -&gt; (a -&gt; t m r) -&gt; t m r</li></ul></div><div id="interface"><h1 id="g:1">ServerPartT
</h1><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:ServerPartT" class="def">ServerPartT</a> m a </p><div class="doc"><p><code><a href="Happstack-Server-Monads.html#t:ServerPartT">ServerPartT</a></code> is a rich, featureful monad for web development.
</p><p>see also: <code>simpleHTTP</code>, <code><a href="Happstack-Server-Monads.html#t:ServerMonad">ServerMonad</a></code>, <code><a href="Happstack-Server-Monads.html#t:FilterMonad">FilterMonad</a></code>, <code><a href="Happstack-Server-Monads.html#t:WebMonad">WebMonad</a></code>, and <code>HasRqData</code>
</p></div><div class="subs instances"><p id="control.i:ServerPartT" class="caption collapser" onclick="toggleSection('i:ServerPartT')">Instances</p><div id="section.i:ServerPartT" class="show"><table><tr><td class="src"><a href="file:///Library/Haskell/ghc-7.6.3/lib/transformers-0.3.0.0/doc/html/Control-Monad-Trans-Class.html#t:MonadTrans">MonadTrans</a> <a href="Happstack-Server-Monads.html#t:ServerPartT">ServerPartT</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///Users/gzmask/project/happstack01/.cabal-sandbox/share/doc/x86_64-osx-ghc-7.6.3/monad-control-0.3.2.2/html/Control-Monad-Trans-Control.html#t:MonadTransControl">MonadTransControl</a> <a href="Happstack-Server-Monads.html#t:ServerPartT">ServerPartT</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///Users/gzmask/project/happstack01/.cabal-sandbox/share/doc/x86_64-osx-ghc-7.6.3/transformers-base-0.4.1/html/Control-Monad-Base.html#t:MonadBase">MonadBase</a> b m =&gt; <a href="file:///Users/gzmask/project/happstack01/.cabal-sandbox/share/doc/x86_64-osx-ghc-7.6.3/transformers-base-0.4.1/html/Control-Monad-Base.html#t:MonadBase">MonadBase</a> b (<a href="Happstack-Server-Monads.html#t:ServerPartT">ServerPartT</a> m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///Users/gzmask/project/happstack01/.cabal-sandbox/share/doc/x86_64-osx-ghc-7.6.3/monad-control-0.3.2.2/html/Control-Monad-Trans-Control.html#t:MonadBaseControl">MonadBaseControl</a> b m =&gt; <a href="file:///Users/gzmask/project/happstack01/.cabal-sandbox/share/doc/x86_64-osx-ghc-7.6.3/monad-control-0.3.2.2/html/Control-Monad-Trans-Control.html#t:MonadBaseControl">MonadBaseControl</a> b (<a href="Happstack-Server-Monads.html#t:ServerPartT">ServerPartT</a> m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">(<a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Monad">Monad</a> m, <a href="file:///Library/Haskell/ghc-7.6.3/lib/mtl-2.1.2/doc/html/Control-Monad-Error-Class.html#t:MonadError">MonadError</a> e m) =&gt; <a href="file:///Library/Haskell/ghc-7.6.3/lib/mtl-2.1.2/doc/html/Control-Monad-Error-Class.html#t:MonadError">MonadError</a> e (<a href="Happstack-Server-Monads.html#t:ServerPartT">ServerPartT</a> m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">(<a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Monad">Monad</a> m, <a href="file:///Library/Haskell/ghc-7.6.3/lib/mtl-2.1.2/doc/html/Control-Monad-Reader-Class.html#t:MonadReader">MonadReader</a> r m) =&gt; <a href="file:///Library/Haskell/ghc-7.6.3/lib/mtl-2.1.2/doc/html/Control-Monad-Reader-Class.html#t:MonadReader">MonadReader</a> r (<a href="Happstack-Server-Monads.html#t:ServerPartT">ServerPartT</a> m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">(<a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Monad">Monad</a> m, <a href="file:///Library/Haskell/ghc-7.6.3/lib/mtl-2.1.2/doc/html/Control-Monad-State-Class.html#t:MonadState">MonadState</a> s m) =&gt; <a href="file:///Library/Haskell/ghc-7.6.3/lib/mtl-2.1.2/doc/html/Control-Monad-State-Class.html#t:MonadState">MonadState</a> s (<a href="Happstack-Server-Monads.html#t:ServerPartT">ServerPartT</a> m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">(<a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Monad">Monad</a> m, <a href="file:///Library/Haskell/ghc-7.6.3/lib/mtl-2.1.2/doc/html/Control-Monad-Writer-Class.html#t:MonadWriter">MonadWriter</a> w m) =&gt; <a href="file:///Library/Haskell/ghc-7.6.3/lib/mtl-2.1.2/doc/html/Control-Monad-Writer-Class.html#t:MonadWriter">MonadWriter</a> w (<a href="Happstack-Server-Monads.html#t:ServerPartT">ServerPartT</a> m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="Happstack-Server-Monads.html#t:WebMonad">WebMonad</a> <a href="Happstack-Server-Internal-Types.html#t:Response">Response</a> (<a href="Happstack-Server-Monads.html#t:ServerPartT">ServerPartT</a> m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="Happstack-Server-Monads.html#t:FilterMonad">FilterMonad</a> <a href="Happstack-Server-Internal-Types.html#t:Response">Response</a> (<a href="Happstack-Server-Monads.html#t:ServerPartT">ServerPartT</a> m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Monad">Monad</a> (<a href="Happstack-Server-Monads.html#t:ServerPartT">ServerPartT</a> m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Functor">Functor</a> m =&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Functor">Functor</a> (<a href="Happstack-Server-Monads.html#t:ServerPartT">ServerPartT</a> m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:MonadPlus">MonadPlus</a> (<a href="Happstack-Server-Monads.html#t:ServerPartT">ServerPartT</a> m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">(<a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Monad">Monad</a> m, <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Functor">Functor</a> m) =&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Applicative.html#t:Applicative">Applicative</a> (<a href="Happstack-Server-Monads.html#t:ServerPartT">ServerPartT</a> m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">(<a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Functor">Functor</a> m, <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:MonadPlus">MonadPlus</a> m) =&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Applicative.html#t:Alternative">Alternative</a> (<a href="Happstack-Server-Monads.html#t:ServerPartT">ServerPartT</a> m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///Library/Haskell/ghc-7.6.3/lib/transformers-0.3.0.0/doc/html/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m =&gt; <a href="file:///Library/Haskell/ghc-7.6.3/lib/transformers-0.3.0.0/doc/html/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> (<a href="Happstack-Server-Monads.html#t:ServerPartT">ServerPartT</a> m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="Happstack-Server-Monads.html#t:ServerMonad">ServerMonad</a> (<a href="Happstack-Server-Monads.html#t:ServerPartT">ServerPartT</a> m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///Library/Haskell/ghc-7.6.3/lib/transformers-0.3.0.0/doc/html/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m =&gt; <a href="Happstack-Server-RqData.html#t:HasRqData">HasRqData</a> (<a href="Happstack-Server-Monads.html#t:ServerPartT">ServerPartT</a> m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">(<a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Functor">Functor</a> m, <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Monad">Monad</a> m, <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:MonadPlus">MonadPlus</a> m, <a href="file:///Library/Haskell/ghc-7.6.3/lib/transformers-0.3.0.0/doc/html/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m) =&gt; <a href="Happstack-Server-Monads.html#t:Happstack">Happstack</a> (<a href="Happstack-Server-Monads.html#t:ServerPartT">ServerPartT</a> m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Monoid.html#t:Monoid">Monoid</a> (<a href="Happstack-Server-Monads.html#t:ServerPartT">ServerPartT</a> m a)</td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:ServerPart" class="def">ServerPart</a> a = <a href="Happstack-Server-Monads.html#t:ServerPartT">ServerPartT</a> <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/System-IO.html#t:IO">IO</a> a</p><div class="doc"><p>An alias for <code><code><a href="Happstack-Server-Monads.html#t:ServerPartT">ServerPartT</a></code> <code><a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/System-IO.html#t:IO">IO</a></code></code>
</p></div></div><h1 id="g:2">Happstack class
</h1><div class="top"><p class="src"><span class="keyword">class</span> (<a href="Happstack-Server-Monads.html#t:ServerMonad">ServerMonad</a> m, <a href="Happstack-Server-Monads.html#t:WebMonad">WebMonad</a> <a href="Happstack-Server-Internal-Types.html#t:Response">Response</a> m, <a href="Happstack-Server-Monads.html#t:FilterMonad">FilterMonad</a> <a href="Happstack-Server-Internal-Types.html#t:Response">Response</a> m, <a href="file:///Library/Haskell/ghc-7.6.3/lib/transformers-0.3.0.0/doc/html/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:MonadPlus">MonadPlus</a> m, <a href="Happstack-Server-RqData.html#t:HasRqData">HasRqData</a> m, <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Monad">Monad</a> m, <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Functor">Functor</a> m, <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Applicative.html#t:Applicative">Applicative</a> m, <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Applicative.html#t:Alternative">Alternative</a> m) =&gt; <a name="t:Happstack" class="def">Happstack</a> m </p><div class="doc"><p>A class alias for all the classes a standard server monad (such as <code><a href="Happstack-Server-Monads.html#t:ServerPartT">ServerPartT</a></code>) is expected to have instances for. This allows you to keep your type signatures shorter and easier to understand.
</p></div><div class="subs instances"><p id="control.i:Happstack" class="caption collapser" onclick="toggleSection('i:Happstack')">Instances</p><div id="section.i:Happstack" class="show"><table><tr><td class="src">(<a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Functor">Functor</a> m, <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Monad">Monad</a> m, <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:MonadPlus">MonadPlus</a> m, <a href="file:///Library/Haskell/ghc-7.6.3/lib/transformers-0.3.0.0/doc/html/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m) =&gt; <a href="Happstack-Server-Monads.html#t:Happstack">Happstack</a> (<a href="Happstack-Server-Monads.html#t:ServerPartT">ServerPartT</a> m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">(<a href="Happstack-Server-Monads.html#t:Happstack">Happstack</a> m, <a href="file:///Library/Haskell/ghc-7.6.3/lib/mtl-2.1.2/doc/html/Control-Monad-Error-Class.html#t:Error">Error</a> e) =&gt; <a href="Happstack-Server-Monads.html#t:Happstack">Happstack</a> (<a href="file:///Library/Haskell/ghc-7.6.3/lib/mtl-2.1.2/doc/html/Control-Monad-Error.html#t:ErrorT">ErrorT</a> e m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Happstack-Server-Monads.html#t:Happstack">Happstack</a> m =&gt; <a href="Happstack-Server-Monads.html#t:Happstack">Happstack</a> (<a href="file:///Library/Haskell/ghc-7.6.3/lib/mtl-2.1.2/doc/html/Control-Monad-Reader.html#t:ReaderT">ReaderT</a> r m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Happstack-Server-Monads.html#t:Happstack">Happstack</a> m =&gt; <a href="Happstack-Server-Monads.html#t:Happstack">Happstack</a> (<a href="file:///Library/Haskell/ghc-7.6.3/lib/mtl-2.1.2/doc/html/Control-Monad-State-Lazy.html#t:StateT">StateT</a> s m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">(<a href="Happstack-Server-Monads.html#t:Happstack">Happstack</a> m, <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Monoid.html#t:Monoid">Monoid</a> w) =&gt; <a href="Happstack-Server-Monads.html#t:Happstack">Happstack</a> (<a href="file:///Library/Haskell/ghc-7.6.3/lib/mtl-2.1.2/doc/html/Control-Monad-Writer-Lazy.html#t:WriterT">WriterT</a> w m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">(<a href="Happstack-Server-Monads.html#t:Happstack">Happstack</a> m, <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Monoid.html#t:Monoid">Monoid</a> w) =&gt; <a href="Happstack-Server-Monads.html#t:Happstack">Happstack</a> (<a href="file:///Library/Haskell/ghc-7.6.3/lib/mtl-2.1.2/doc/html/Control-Monad-RWS-Lazy.html#t:RWST">RWST</a> r w s m)</td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><h1 id="g:3">ServerMonad
</h1><div class="top"><p class="src"><span class="keyword">class</span> <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a name="t:ServerMonad" class="def">ServerMonad</a> m  <span class="keyword">where</span></p><div class="doc"><p>The <code><a href="Happstack-Server-Monads.html#t:ServerMonad">ServerMonad</a></code> class provides methods for reading or locally
 modifying the <code><a href="Happstack-Server-Internal-Types.html#t:Request">Request</a></code>. It is essentially a specialized version of
 the <code><a href="file:///Library/Haskell/ghc-7.6.3/lib/mtl-2.1.2/doc/html/Control-Monad-Reader-Class.html#t:MonadReader">MonadReader</a></code> class. Providing the unique names, <code><a href="Happstack-Server-Monads.html#v:askRq">askRq</a></code> and
 <code><a href="Happstack-Server-Monads.html#v:localRq">localRq</a></code> makes it easier to use <code><a href="Happstack-Server-Monads.html#t:ServerPartT">ServerPartT</a></code> and <code><a href="file:///Library/Haskell/ghc-7.6.3/lib/mtl-2.1.2/doc/html/Control-Monad-Reader.html#t:ReaderT">ReaderT</a></code>
 together.
</p></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a name="v:askRq" class="def">askRq</a> :: m <a href="Happstack-Server-Internal-Types.html#t:Request">Request</a></p><p class="src"><a name="v:localRq" class="def">localRq</a> ::  (<a href="Happstack-Server-Internal-Types.html#t:Request">Request</a> -&gt; <a href="Happstack-Server-Internal-Types.html#t:Request">Request</a>) -&gt; m a -&gt; m a</p></div><div class="subs instances"><p id="control.i:ServerMonad" class="caption collapser" onclick="toggleSection('i:ServerMonad')">Instances</p><div id="section.i:ServerMonad" class="show"><table><tr><td class="src"><a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="Happstack-Server-Monads.html#t:ServerMonad">ServerMonad</a> (<a href="Happstack-Server-Monads.html#t:ServerPartT">ServerPartT</a> m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">(<a href="file:///Library/Haskell/ghc-7.6.3/lib/mtl-2.1.2/doc/html/Control-Monad-Error-Class.html#t:Error">Error</a> e, <a href="Happstack-Server-Monads.html#t:ServerMonad">ServerMonad</a> m) =&gt; <a href="Happstack-Server-Monads.html#t:ServerMonad">ServerMonad</a> (<a href="file:///Library/Haskell/ghc-7.6.3/lib/mtl-2.1.2/doc/html/Control-Monad-Error.html#t:ErrorT">ErrorT</a> e m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Happstack-Server-Monads.html#t:ServerMonad">ServerMonad</a> m =&gt; <a href="Happstack-Server-Monads.html#t:ServerMonad">ServerMonad</a> (<a href="file:///Library/Haskell/ghc-7.6.3/lib/mtl-2.1.2/doc/html/Control-Monad-Reader.html#t:ReaderT">ReaderT</a> r m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Happstack-Server-Monads.html#t:ServerMonad">ServerMonad</a> m =&gt; <a href="Happstack-Server-Monads.html#t:ServerMonad">ServerMonad</a> (<a href="file:///Library/Haskell/ghc-7.6.3/lib/mtl-2.1.2/doc/html/Control-Monad-State-Lazy.html#t:StateT">StateT</a> s m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">(<a href="Happstack-Server-Monads.html#t:ServerMonad">ServerMonad</a> m, <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Monoid.html#t:Monoid">Monoid</a> w) =&gt; <a href="Happstack-Server-Monads.html#t:ServerMonad">ServerMonad</a> (<a href="file:///Library/Haskell/ghc-7.6.3/lib/mtl-2.1.2/doc/html/Control-Monad-Writer-Lazy.html#t:WriterT">WriterT</a> w m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">(<a href="Happstack-Server-Monads.html#t:ServerMonad">ServerMonad</a> m, <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Monoid.html#t:Monoid">Monoid</a> w) =&gt; <a href="Happstack-Server-Monads.html#t:ServerMonad">ServerMonad</a> (<a href="file:///Library/Haskell/ghc-7.6.3/lib/mtl-2.1.2/doc/html/Control-Monad-RWS-Lazy.html#t:RWST">RWST</a> r w s m)</td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:mapServerPartT" class="def">mapServerPartT</a> ::  (<a href="Happstack-Server-Monads.html#t:UnWebT">UnWebT</a> m a -&gt; <a href="Happstack-Server-Monads.html#t:UnWebT">UnWebT</a> n b) -&gt; <a href="Happstack-Server-Monads.html#t:ServerPartT">ServerPartT</a> m a -&gt; <a href="Happstack-Server-Monads.html#t:ServerPartT">ServerPartT</a> n b</p><div class="doc"><p>Apply a function to transform the inner monad of
 <code><code><a href="Happstack-Server-Monads.html#t:ServerPartT">ServerPartT</a></code> m</code>.
</p><p>Often used when transforming a monad with <code><a href="Happstack-Server-Monads.html#t:ServerPartT">ServerPartT</a></code>, since
 <code>simpleHTTP</code> requires a <code><code><a href="Happstack-Server-Monads.html#t:ServerPartT">ServerPartT</a></code> <code><a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/System-IO.html#t:IO">IO</a></code> a</code>.  Refer to <code><a href="Happstack-Server-Monads.html#t:UnWebT">UnWebT</a></code>
 for an explanation of the structure of the monad.
</p><p>Here is an example.  Suppose you want to embed an <code><a href="file:///Library/Haskell/ghc-7.6.3/lib/mtl-2.1.2/doc/html/Control-Monad-Error.html#t:ErrorT">ErrorT</a></code> into your
 <code><a href="Happstack-Server-Monads.html#t:ServerPartT">ServerPartT</a></code> to enable <code><a href="file:///Library/Haskell/ghc-7.6.3/lib/mtl-2.1.2/doc/html/Control-Monad-Error-Class.html#v:throwError">throwError</a></code> and <code><a href="file:///Library/Haskell/ghc-7.6.3/lib/mtl-2.1.2/doc/html/Control-Monad-Error-Class.html#v:catchError">catchError</a></code> in your <code><a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Monad">Monad</a></code>.
</p><pre> type MyServerPartT e m a = ServerPartT (ErrorT e m) a
</pre><p>Now suppose you want to pass <code>MyServerPartT</code> into a function that
 demands a <code><code><a href="Happstack-Server-Monads.html#t:ServerPartT">ServerPartT</a></code> <code><a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/System-IO.html#t:IO">IO</a></code> a</code> (e.g. <code>simpleHTTP</code>).  You can
 provide the function:
</p><pre>   unpackErrorT :: (Monad m, Show e) =&gt; UnWebT (ErrorT e m) a -&gt; UnWebT m a
   unpackErrorT et = do
      eitherV &lt;- runErrorT et
      return $ case eitherV of
          Left err -&gt; Just (Left $ toResponse $
                                   &quot;Catastrophic failure &quot; ++ show err
                           , filterFun $ \r -&gt; r{rsCode = 500})
          Right x -&gt; x
</pre><p>With <code>unpackErrorT</code> you can now call <code>simpleHTTP</code>. Just wrap your
 <code><a href="Happstack-Server-Monads.html#t:ServerPartT">ServerPartT</a></code> list.
</p><pre>  simpleHTTP nullConf $ mapServerPartT unpackErrorT (myPart `catchError` myHandler)
</pre><p>Or alternatively:
</p><pre>  simpleHTTP' unpackErrorT nullConf (myPart `catchError` myHandler)
</pre><p>Also see <code><a href="Happstack-Server-Error.html#t:spUnwrapErrorT">spUnwrapErrorT</a></code> for a more sophisticated version of this
 function.
</p></div></div><div class="top"><p class="src"><a name="v:mapServerPartT-39-" class="def">mapServerPartT'</a> ::  (<a href="Happstack-Server-Internal-Types.html#t:Request">Request</a> -&gt; <a href="Happstack-Server-Monads.html#t:UnWebT">UnWebT</a> m a -&gt; <a href="Happstack-Server-Monads.html#t:UnWebT">UnWebT</a> n b) -&gt; <a href="Happstack-Server-Monads.html#t:ServerPartT">ServerPartT</a> m a -&gt; <a href="Happstack-Server-Monads.html#t:ServerPartT">ServerPartT</a> n b</p><div class="doc"><p>A variant of <code><a href="Happstack-Server-Monads.html#v:mapServerPartT">mapServerPartT</a></code> where the first argument also takes
 a <code><a href="Happstack-Server-Internal-Types.html#t:Request">Request</a></code>.  Useful if you want to <code><a href="Happstack-Server-Internal-Monads.html#v:runServerPartT">runServerPartT</a></code> on a different
 <code><a href="Happstack-Server-Monads.html#t:ServerPartT">ServerPartT</a></code> inside your monad (see <code>spUnwrapErrorT</code>).
</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:UnWebT" class="def">UnWebT</a> m a = m (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Either.html#t:Either">Either</a> <a href="Happstack-Server-Internal-Types.html#t:Response">Response</a> a, <a href="Happstack-Server-Internal-Monads.html#t:FilterFun">FilterFun</a> <a href="Happstack-Server-Internal-Types.html#t:Response">Response</a>))</p><div class="doc"><p><code><a href="Happstack-Server-Monads.html#t:UnWebT">UnWebT</a></code> is almost exclusively used with <code><a href="Happstack-Server-Monads.html#v:mapServerPartT">mapServerPartT</a></code>. If you
 are not using <code><a href="Happstack-Server-Monads.html#v:mapServerPartT">mapServerPartT</a></code> then you do not need to wrap your
 head around this type. If you are -- the type is not as complex as
 it first appears.
</p><p>It is worth discussing the unpacked structure of <code><a href="Happstack-Server-Internal-Monads.html#t:WebT">WebT</a></code> a bit as
 it's exposed in <code><a href="Happstack-Server-Monads.html#v:mapServerPartT">mapServerPartT</a></code> and <code><a href="Happstack-Server-Internal-Monads.html#v:mapWebT">mapWebT</a></code>.
</p><p>A fully unpacked <code><a href="Happstack-Server-Internal-Monads.html#t:WebT">WebT</a></code> has a structure that looks like:
</p><pre> ununWebT $ WebT m a :: m (Maybe (Either Response a, FilterFun Response))
</pre><p>So, ignoring <code>m</code>, as it is just the containing <code><a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Monad">Monad</a></code>, the
  outermost layer is a <code><a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Maybe.html#t:Maybe">Maybe</a></code>.  This is <code><a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Maybe.html#v:Nothing">Nothing</a></code> if <code><a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#v:mzero">mzero</a></code> was
  called or <code><code><a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Maybe.html#v:Just">Just</a></code> (<code><a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Either.html#t:Either">Either</a></code> <code><a href="Happstack-Server-Internal-Types.html#t:Response">Response</a></code> a, <code><a href="Happstack-Server-Internal-Monads.html#t:SetAppend">SetAppend</a></code> (<code><a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Monoid.html#t:Endo">Endo</a></code>
  <code><a href="Happstack-Server-Internal-Types.html#t:Response">Response</a></code>))</code> if <code><a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#v:mzero">mzero</a></code> wasn't called.  Inside the <code><a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Maybe.html#t:Maybe">Maybe</a></code>, there
  is a pair.  The second element of the pair is our filter function
  <code><code><a href="Happstack-Server-Internal-Monads.html#t:FilterFun">FilterFun</a></code> <code><a href="Happstack-Server-Internal-Types.html#t:Response">Response</a></code></code>.  <code><code><a href="Happstack-Server-Internal-Monads.html#t:FilterFun">FilterFun</a></code> <code><a href="Happstack-Server-Internal-Types.html#t:Response">Response</a></code></code> is a type
  alias for <code><code><a href="Happstack-Server-Internal-Monads.html#t:SetAppend">SetAppend</a></code> (<code><a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Monoid.html#t:Dual">Dual</a></code> (<code><a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Monoid.html#t:Endo">Endo</a></code> <code><a href="Happstack-Server-Internal-Types.html#t:Response">Response</a></code>))</code>.  This is
  just a wrapper for a <code><code><a href="Happstack-Server-Internal-Types.html#t:Response">Response</a></code> -&gt; <code><a href="Happstack-Server-Internal-Types.html#t:Response">Response</a></code></code> function with a
  particular <code><a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Monoid.html#t:Monoid">Monoid</a></code> behavior.  The value
</p><pre>  Append (Dual (Endo f))
</pre><p>Causes <code>f</code> to be composed with the previous filter.
</p><pre>  Set (Dual (Endo f))
</pre><p>Causes <code>f</code> to not be composed with the previous filter.
</p><p>Finally, the first element of the pair is either <code><code><a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Either.html#v:Left">Left</a></code>
  <code><a href="Happstack-Server-Internal-Types.html#t:Response">Response</a></code></code> or <code><code><a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Either.html#v:Right">Right</a></code> a</code>.
</p><p>Another way of looking at all these pieces is from the behaviors
  they control.  The <code><a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Maybe.html#t:Maybe">Maybe</a></code> controls the <code><a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#v:mzero">mzero</a></code> behavior.  <code><code><a href="Happstack-Server-Internal-Monads.html#v:Set">Set</a></code>
  (<code><a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Monoid.html#t:Endo">Endo</a></code> f)</code> comes from the <code><a href="Happstack-Server-Monads.html#v:setFilter">setFilter</a></code> behavior.  Likewise,
  <code><code><a href="Happstack-Server-Internal-Monads.html#v:Append">Append</a></code> (<code><a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Monoid.html#t:Endo">Endo</a></code> f)</code> is from <code><a href="Happstack-Server-Monads.html#v:composeFilter">composeFilter</a></code>.  <code><code><a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Either.html#v:Left">Left</a></code>
  <code><a href="Happstack-Server-Internal-Types.html#t:Response">Response</a></code></code> is what you get when you call <code><a href="Happstack-Server-Monads.html#v:finishWith">finishWith</a></code> and
  <code><code><a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Either.html#v:Right">Right</a></code> a</code> is the normal exit.
</p><p>An example case statement looks like:
</p><pre>  ex1 webt = do
    val &lt;- ununWebT webt
    case val of
        Nothing -&gt; Nothing  -- this is the interior value when mzero was used
        Just (Left r, f) -&gt; Just (Left r, f) -- r is the value that was passed into &quot;finishWith&quot;
                                             -- f is our filter function
        Just (Right a, f) -&gt; Just (Right a, f) -- a is our normal monadic value
                                               -- f is still our filter function
</pre></div></div><div class="top"><p class="src"><a name="v:filterFun" class="def">filterFun</a> ::  (a -&gt; a) -&gt; <a href="Happstack-Server-Internal-Monads.html#t:FilterFun">FilterFun</a> a</p><div class="doc"><p>turn a function into a <code><a href="Happstack-Server-Internal-Monads.html#t:FilterFun">FilterFun</a></code>. Primarily used with <code><a href="Happstack-Server-Monads.html#v:mapServerPartT">mapServerPartT</a></code>
</p></div></div><h1 id="g:4">FilterMonad
</h1><div class="top"><p class="src"><span class="keyword">class</span> <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a name="t:FilterMonad" class="def">FilterMonad</a> a m | m -&gt; a <span class="keyword">where</span></p><div class="doc"><p>A set of functions for manipulating filters.
</p><p><code><a href="Happstack-Server-Monads.html#t:ServerPartT">ServerPartT</a></code> implements <code><a href="Happstack-Server-Monads.html#t:FilterMonad">FilterMonad</a></code> <code><a href="Happstack-Server-Internal-Types.html#t:Response">Response</a></code> so these methods
 are the fundamental ways of manipulating <code><a href="Happstack-Server-Internal-Types.html#t:Response">Response</a></code> values.
</p></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a name="v:setFilter" class="def">setFilter</a> :: (a -&gt; a) -&gt; m ()</p><div class="doc"><p>Ignores all previous alterations to your filter
</p><p>As an example:
</p><pre> do
   composeFilter f
   setFilter g
   return &quot;Hello World&quot;
</pre><p>The <code><code><a href="Happstack-Server-Monads.html#v:setFilter">setFilter</a></code> g</code> will cause the first <code><code><a href="Happstack-Server-Monads.html#v:composeFilter">composeFilter</a></code> f</code> to
 be ignored.
</p></div><p class="src"><a name="v:composeFilter" class="def">composeFilter</a> :: (a -&gt; a) -&gt; m ()</p><div class="doc"><p>Composes your filter function with the existing filter
 function.
</p></div><p class="src"><a name="v:getFilter" class="def">getFilter</a> ::  m b -&gt; m (b, a -&gt; a)</p><div class="doc"><p>Retrieves the filter from the environment.
</p></div></div><div class="subs instances"><p id="control.i:FilterMonad" class="caption collapser" onclick="toggleSection('i:FilterMonad')">Instances</p><div id="section.i:FilterMonad" class="show"><table><tr><td class="src"><a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="Happstack-Server-Monads.html#t:FilterMonad">FilterMonad</a> <a href="Happstack-Server-Internal-Types.html#t:Response">Response</a> (<a href="Happstack-Server-Internal-Monads.html#t:WebT">WebT</a> m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="Happstack-Server-Monads.html#t:FilterMonad">FilterMonad</a> <a href="Happstack-Server-Internal-Types.html#t:Response">Response</a> (<a href="Happstack-Server-Monads.html#t:ServerPartT">ServerPartT</a> m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">(<a href="file:///Library/Haskell/ghc-7.6.3/lib/mtl-2.1.2/doc/html/Control-Monad-Error-Class.html#t:Error">Error</a> e, <a href="Happstack-Server-Monads.html#t:FilterMonad">FilterMonad</a> a m) =&gt; <a href="Happstack-Server-Monads.html#t:FilterMonad">FilterMonad</a> a (<a href="file:///Library/Haskell/ghc-7.6.3/lib/mtl-2.1.2/doc/html/Control-Monad-Error.html#t:ErrorT">ErrorT</a> e m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">(<a href="Happstack-Server-Monads.html#t:FilterMonad">FilterMonad</a> res m, <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Monoid.html#t:Monoid">Monoid</a> w) =&gt; <a href="Happstack-Server-Monads.html#t:FilterMonad">FilterMonad</a> res (<a href="file:///Library/Haskell/ghc-7.6.3/lib/mtl-2.1.2/doc/html/Control-Monad-Writer-Lazy.html#t:WriterT">WriterT</a> w m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Happstack-Server-Monads.html#t:FilterMonad">FilterMonad</a> res m =&gt; <a href="Happstack-Server-Monads.html#t:FilterMonad">FilterMonad</a> res (<a href="file:///Library/Haskell/ghc-7.6.3/lib/mtl-2.1.2/doc/html/Control-Monad-State-Lazy.html#t:StateT">StateT</a> s m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Happstack-Server-Monads.html#t:FilterMonad">FilterMonad</a> res m =&gt; <a href="Happstack-Server-Monads.html#t:FilterMonad">FilterMonad</a> res (<a href="file:///Library/Haskell/ghc-7.6.3/lib/mtl-2.1.2/doc/html/Control-Monad-Reader.html#t:ReaderT">ReaderT</a> r m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="Happstack-Server-Monads.html#t:FilterMonad">FilterMonad</a> a (<a href="Happstack-Server-Internal-Monads.html#t:FilterT">FilterT</a> a m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">(<a href="Happstack-Server-Monads.html#t:FilterMonad">FilterMonad</a> res m, <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Monoid.html#t:Monoid">Monoid</a> w) =&gt; <a href="Happstack-Server-Monads.html#t:FilterMonad">FilterMonad</a> res (<a href="file:///Library/Haskell/ghc-7.6.3/lib/mtl-2.1.2/doc/html/Control-Monad-RWS-Lazy.html#t:RWST">RWST</a> r w s m)</td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:ignoreFilters" class="def">ignoreFilters</a> :: <a href="Happstack-Server-Monads.html#t:FilterMonad">FilterMonad</a> a m =&gt; m ()</p><div class="doc"><p>Resets all your filters. An alias for <code><code><a href="Happstack-Server-Monads.html#v:setFilter">setFilter</a></code> <code><a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Prelude.html#v:id">id</a></code></code>.
</p></div></div><div class="top"><p class="src"><a name="v:addHeaderM" class="def">addHeaderM</a> :: <a href="Happstack-Server-Monads.html#t:FilterMonad">FilterMonad</a> <a href="Happstack-Server-Internal-Types.html#t:Response">Response</a> m =&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-String.html#t:String">String</a> -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-String.html#t:String">String</a> -&gt; m ()</p><div class="doc"><p>Add headers into the response.  This method does not overwrite
 any existing header of the same name, hence the name <code><a href="Happstack-Server-Monads.html#v:addHeaderM">addHeaderM</a></code>.
 If you want to replace a header use <code><a href="Happstack-Server-Monads.html#v:setHeaderM">setHeaderM</a></code>.
</p></div></div><div class="top"><p class="src"><a name="v:getHeaderM" class="def">getHeaderM</a> :: <a href="Happstack-Server-Monads.html#t:ServerMonad">ServerMonad</a> m =&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-String.html#t:String">String</a> -&gt; m (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Maybe.html#t:Maybe">Maybe</a> <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.0.2/Data-ByteString.html#t:ByteString">ByteString</a>)</p><div class="doc"><p>Get a header out of the request.
</p></div></div><div class="top"><p class="src"><a name="v:setHeaderM" class="def">setHeaderM</a> :: <a href="Happstack-Server-Monads.html#t:FilterMonad">FilterMonad</a> <a href="Happstack-Server-Internal-Types.html#t:Response">Response</a> m =&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-String.html#t:String">String</a> -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-String.html#t:String">String</a> -&gt; m ()</p><div class="doc"><p>Set a header into the response.  This will replace an existing
 header of the same name.  Use <code><a href="Happstack-Server-Monads.html#v:addHeaderM">addHeaderM</a></code> if you want to add more
 than one header of the same name.
</p></div></div><div class="top"><p class="src"><a name="v:neverExpires" class="def">neverExpires</a> :: <a href="Happstack-Server-Monads.html#t:FilterMonad">FilterMonad</a> <a href="Happstack-Server-Internal-Types.html#t:Response">Response</a> m =&gt; m ()</p><div class="doc"><p>Set a far-future Expires header.  Useful for static resources.  If the
 browser has the resource cached, no extra request is spent.
</p></div></div><h1 id="g:5">WebMonad
</h1><div class="top"><p class="src"><span class="keyword">class</span> <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a name="t:WebMonad" class="def">WebMonad</a> a m | m -&gt; a <span class="keyword">where</span></p><div class="doc"><p><code><a href="Happstack-Server-Monads.html#t:WebMonad">WebMonad</a></code> provides a means to end the current computation
 and return a <code><a href="Happstack-Server-Internal-Types.html#t:Response">Response</a></code> immediately.  This provides an
 alternate escape route.  In particular it has a monadic value
 of any type.  And unless you call <code><code><a href="Happstack-Server-Monads.html#v:setFilter">setFilter</a></code> <code><a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Prelude.html#v:id">id</a></code></code> first your
 response filters will be applied normally.
</p><p>Extremely useful when you're deep inside a monad and decide
 that you want to return a completely different content type,
 since it doesn't force you to convert all your return types to
 <code><a href="Happstack-Server-Internal-Types.html#t:Response">Response</a></code> early just to accommodate this.
</p><p>see also: <code><a href="Happstack-Server-Monads.html#v:escape">escape</a></code> and <code><a href="Happstack-Server-Monads.html#v:escape-39-">escape'</a></code>
</p></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a name="v:finishWith" class="def">finishWith</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: a</td><td class="doc"><p>value to return (For <code><a href="Happstack-Server-Monads.html#t:ServerPart">ServerPart</a></code>, <code>a</code> will always be the type <code><a href="Happstack-Server-Internal-Types.html#t:Response">Response</a></code>)
</p></td></tr><tr><td class="src">-&gt; m b</td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="subs instances"><p id="control.i:WebMonad" class="caption collapser" onclick="toggleSection('i:WebMonad')">Instances</p><div id="section.i:WebMonad" class="show"><table><tr><td class="src"><a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="Happstack-Server-Monads.html#t:WebMonad">WebMonad</a> <a href="Happstack-Server-Internal-Types.html#t:Response">Response</a> (<a href="Happstack-Server-Internal-Monads.html#t:WebT">WebT</a> m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="Happstack-Server-Monads.html#t:WebMonad">WebMonad</a> <a href="Happstack-Server-Internal-Types.html#t:Response">Response</a> (<a href="Happstack-Server-Monads.html#t:ServerPartT">ServerPartT</a> m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">(<a href="file:///Library/Haskell/ghc-7.6.3/lib/mtl-2.1.2/doc/html/Control-Monad-Error-Class.html#t:Error">Error</a> e, <a href="Happstack-Server-Monads.html#t:WebMonad">WebMonad</a> a m) =&gt; <a href="Happstack-Server-Monads.html#t:WebMonad">WebMonad</a> a (<a href="file:///Library/Haskell/ghc-7.6.3/lib/mtl-2.1.2/doc/html/Control-Monad-Error.html#t:ErrorT">ErrorT</a> e m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">(<a href="Happstack-Server-Monads.html#t:WebMonad">WebMonad</a> a m, <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Monoid.html#t:Monoid">Monoid</a> w) =&gt; <a href="Happstack-Server-Monads.html#t:WebMonad">WebMonad</a> a (<a href="file:///Library/Haskell/ghc-7.6.3/lib/mtl-2.1.2/doc/html/Control-Monad-Writer-Lazy.html#t:WriterT">WriterT</a> w m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Happstack-Server-Monads.html#t:WebMonad">WebMonad</a> a m =&gt; <a href="Happstack-Server-Monads.html#t:WebMonad">WebMonad</a> a (<a href="file:///Library/Haskell/ghc-7.6.3/lib/mtl-2.1.2/doc/html/Control-Monad-State-Lazy.html#t:StateT">StateT</a> s m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Happstack-Server-Monads.html#t:WebMonad">WebMonad</a> a m =&gt; <a href="Happstack-Server-Monads.html#t:WebMonad">WebMonad</a> a (<a href="file:///Library/Haskell/ghc-7.6.3/lib/mtl-2.1.2/doc/html/Control-Monad-Reader.html#t:ReaderT">ReaderT</a> r m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">(<a href="Happstack-Server-Monads.html#t:WebMonad">WebMonad</a> a m, <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Monoid.html#t:Monoid">Monoid</a> w) =&gt; <a href="Happstack-Server-Monads.html#t:WebMonad">WebMonad</a> a (<a href="file:///Library/Haskell/ghc-7.6.3/lib/mtl-2.1.2/doc/html/Control-Monad-RWS-Lazy.html#t:RWST">RWST</a> r w s m)</td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:escape" class="def">escape</a> :: (<a href="Happstack-Server-Monads.html#t:WebMonad">WebMonad</a> a m, <a href="Happstack-Server-Monads.html#t:FilterMonad">FilterMonad</a> a m) =&gt; m a -&gt; m b</p><div class="doc"><p>Used to ignore all your filters and immediately end the
 computation.  A combination of <code><a href="Happstack-Server-Monads.html#v:ignoreFilters">ignoreFilters</a></code> and <code><a href="Happstack-Server-Monads.html#v:finishWith">finishWith</a></code>.
</p></div></div><div class="top"><p class="src"><a name="v:escape-39-" class="def">escape'</a> :: (<a href="Happstack-Server-Monads.html#t:WebMonad">WebMonad</a> a m, <a href="Happstack-Server-Monads.html#t:FilterMonad">FilterMonad</a> a m) =&gt; a -&gt; m b</p><div class="doc"><p>An alternate form of <code><a href="Happstack-Server-Monads.html#v:escape">escape</a></code> that can be easily used within a do
 block.
</p></div></div><h1 id="g:6">MonadPlus helpers
</h1><div class="top"><p class="src"><a name="v:require" class="def">require</a> :: (<a href="file:///Library/Haskell/ghc-7.6.3/lib/transformers-0.3.0.0/doc/html/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:MonadPlus">MonadPlus</a> m) =&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/System-IO.html#t:IO">IO</a> (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Maybe.html#t:Maybe">Maybe</a> a) -&gt; (a -&gt; m r) -&gt; m r</p><div class="doc"><p>Run an <code><a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/System-IO.html#t:IO">IO</a></code> action and, if it returns <code><a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Maybe.html#v:Just">Just</a></code>, pass it to the
 second argument.
</p></div></div><div class="top"><p class="src"><a name="v:requireM" class="def">requireM</a> :: (<a href="file:///Library/Haskell/ghc-7.6.3/lib/transformers-0.3.0.0/doc/html/Control-Monad-Trans-Class.html#t:MonadTrans">MonadTrans</a> t, <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Monad">Monad</a> m, <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:MonadPlus">MonadPlus</a> (t m)) =&gt; m (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Maybe.html#t:Maybe">Maybe</a> a) -&gt; (a -&gt; t m r) -&gt; t m r</p><div class="doc"><p>A variant of require that can run in any monad, not just <code><a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/System-IO.html#t:IO">IO</a></code>.
</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.13.2</p></div></body></html>